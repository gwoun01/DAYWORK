{"version":3,"file":"index.bundle.js","mappings":"mBAIA,MAAMA,EAAYC,SAASC,eAAe,aACpCC,EAAaF,SAASC,eAAe,cACrCE,EAAgBH,SAASC,eAAe,iBACxCG,EAAeJ,SAASC,eAAe,sBACvCI,EAAYL,SAASC,eAAe,kBACpCK,EAAoBN,SAASC,eAAe,kBAC5CM,EAAeP,SAASC,eAAe,gBACvCO,EAAeR,SAASC,eAAe,gBACvCQ,EAAeT,SAASC,eAAe,oBAKvCS,EAHgC,cAAtBC,SAASC,UACC,cAAtBD,SAASC,UACTD,SAASC,SAASC,SAAS,kBAEzB,wBACA,6DAON,SAASC,IAAgBV,EAAaW,UAAUC,IAAI,SAAW,CAE/D,SAASC,EAAcC,GACnB,MAAMC,EAAQnB,SAASC,eAAe,oBAClCkB,IACAA,EAAMC,YAAcF,GACxBb,EAAUU,UAAUM,OAAO,SAC/B,CAqBA,SAASC,EAAgBC,GACR,WAATA,GACAf,EAAaY,YAAc,SAC3BZ,EAAagB,UAAY,SACzBf,EAAagB,MAAQ,WAGrBjB,EAAaY,YAAc,QAC3BZ,EAAagB,UAAY,KACzBf,EAAagB,MAAQ,MAEzBC,aAAaC,QAAQ,aAAcJ,EACvC,CA7CAjB,EAAkBsB,iBAAiB,QAAS,KACxCvB,EAAUU,UAAUC,IAAI,YA8C5BP,EAAamB,iBAAiB,SAAWC,IAErCP,EADaO,EAAEC,OAAOL,SAI1BzB,SAAS4B,iBAAiB,mBAAoB,KAE1CN,EADcI,aAAaK,QAAQ,eAAiB,MAvCxDC,iBACI,IAEI,WADkBC,MAAM,GAAGvB,eAAuB,CAAEwB,OAAQ,SACpDC,GAKJ,MAAM,IAAIC,MAAM,YAJhB7B,EAAaa,YAAc,WAC3Bb,EAAaiB,UAAY,QAKjC,CACA,MACIjB,EAAaa,YAAc,WAC3Bb,EAAaiB,UAAY,SAC7B,CACJ,CA0BIa,KAKJtC,GAAW6B,iBAAiB,SAAUI,MAAOH,IACzCA,EAAES,iBACF,MAAMC,EAAWrC,EAAWuB,MAAMe,OAC5BC,EAAWtC,EAAcsB,MAAMe,OAC/BjB,EAAOG,aAAaK,QAAQ,eAAiB,KACnD,GAAKQ,GAAaE,EAIlB,IAjEqBrC,EAAaW,UAAUM,OAAO,UAmE/C,MAAMqB,EAAY,KACXC,SAAaC,QAAQC,IAAI,CAC5BZ,MAAM,GAAGvB,cAAsB,CAC3BwB,OAAQ,OACRY,QAAS,CAAE,eAAgB,oBAC3BC,YAAa,UACbC,KAAMC,KAAKC,UAAU,CAAEX,WAAUE,eAErC,IAAIG,QAASO,GAAMC,WAAWD,EAAGT,MAGrC,GADA5B,KACK6B,EAAIR,GAEL,YADAlB,EAAc,2BAGlB,MAAMoC,QAAaV,EAAIW,OACvB5B,aAAaC,QAAQ,OAAQsB,KAAKC,UAAU,CAAEK,GAAIF,EAAKE,GAAIC,KAAMH,EAAKG,KAAMC,UAAWC,KAAKC,SAC5FjC,aAAaC,QAAQ,cAAe0B,EAAKE,IACzC7B,aAAaC,QAAQ,gBAAiB0B,EAAKG,MAE3C,MAAMI,EAAmB,WAATrC,EAAoB,mBAAqB,iBACzDsC,QAAQC,IAAI,kBAAmBF,GAC/BG,OAAOpD,SAASqD,KAAOJ,CAC3B,CACA,MAAOK,GACHJ,QAAQK,MAAMD,GACdnD,IACAG,EAAc,oCAClB,MAjCIA,EAAc,uBAoCtB8C,OAAOnC,iBAAiB,OAAQ,KAC5BF,aAAayC,WAAW,QACxBC,eAAeC,S","sources":["webpack://innomax/./TypeScript/login/index.ts"],"sourcesContent":["\"use strict\";\n// ======================================================\n// ì •í˜¸ê°œë°œ ë¡œê·¸ì¸ ìŠ¤í¬ë¦½íŠ¸ + í™˜ê²½ ì„ íƒ + ì„œë²„ ìƒíƒœ í‘œì‹œ\n// ======================================================\nconst loginForm = document.getElementById(\"loginForm\");\nconst emailInput = document.getElementById(\"emailInput\");\nconst passwordInput = document.getElementById(\"passwordInput\");\nconst loadingPopup = document.getElementById(\"globalLoadingPopup\");\nconst failModal = document.getElementById(\"loginFailModal\");\nconst closeFailModalBtn = document.getElementById(\"closeFailModal\");\nconst serverStatus = document.getElementById(\"serverStatus\");\nconst deviceStatus = document.getElementById(\"deviceStatus\");\nconst deviceSelect = document.getElementById(\"deviceModeSelect\");\n// âœ… ì„œë²„ ì£¼ì†Œ\nconst isLocal = location.hostname === \"localhost\" ||\n    location.hostname === \"127.0.0.1\" ||\n    location.hostname.includes(\"app.github.dev\");\nconst API_BASE = isLocal\n    ? \"http://127.0.0.1:5050\"\n    : \"https://port-0-innomax-mghorm7bef413a34.sel3.cloudtype.app\";\n// âœ… ëª¨ë‹¬ ë‹«ê¸°\ncloseFailModalBtn.addEventListener(\"click\", () => {\n    failModal.classList.add(\"hidden\");\n});\n// âœ… ë¡œë”© ì œì–´\nfunction showLoading() { loadingPopup.classList.remove(\"hidden\"); }\nfunction hideLoading() { loadingPopup.classList.add(\"hidden\"); }\n// âœ… ì‹¤íŒ¨ ëª¨ë‹¬\nfunction showFailModal(message) {\n    const msgEl = document.getElementById(\"loginFailMessage\");\n    if (msgEl)\n        msgEl.textContent = message;\n    failModal.classList.remove(\"hidden\");\n}\n// âœ… ì„œë²„ ì—°ê²° í™•ì¸\nasync function checkServerConnection() {\n    try {\n        const res = await fetch(`${API_BASE}/api/health`, { method: \"GET\" });\n        if (res.ok) {\n            serverStatus.textContent = \"ì„œë²„ ì—°ê²° ì •ìƒ\";\n            serverStatus.className = \"online\";\n        }\n        else {\n            throw new Error(\"ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜\");\n        }\n    }\n    catch {\n        serverStatus.textContent = \"ì„œë²„ ì—°ê²° ì‹¤íŒ¨\";\n        serverStatus.className = \"offline\";\n    }\n}\n// ======================================================\n// ðŸŒ í™˜ê²½ ì„ íƒ (PC / ëª¨ë°”ì¼)\n// ======================================================\nfunction applyDeviceMode(mode) {\n    if (mode === \"mobile\") {\n        deviceStatus.textContent = \"ëª¨ë°”ì¼ ëª¨ë“œ\";\n        deviceStatus.className = \"mobile\";\n        deviceSelect.value = \"mobile\";\n    }\n    else {\n        deviceStatus.textContent = \"PC ëª¨ë“œ\";\n        deviceStatus.className = \"pc\";\n        deviceSelect.value = \"pc\";\n    }\n    localStorage.setItem(\"deviceMode\", mode);\n}\n// âœ… ë“œë¡­ë‹¤ìš´ ë³€ê²½ ì´ë²¤íŠ¸\ndeviceSelect.addEventListener(\"change\", (e) => {\n    const mode = e.target.value;\n    applyDeviceMode(mode);\n});\n// âœ… íŽ˜ì´ì§€ ì§„ìž… ì‹œ ì €ìž¥ëœ í™˜ê²½ ì ìš©\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const saved = localStorage.getItem(\"deviceMode\") || \"pc\";\n    applyDeviceMode(saved);\n    checkServerConnection();\n});\n// ======================================================\n// ðŸ” ë¡œê·¸ì¸ ì²˜ë¦¬\n// ======================================================\nloginForm?.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    const username = emailInput.value.trim();\n    const password = passwordInput.value.trim();\n    const mode = localStorage.getItem(\"deviceMode\") || \"pc\";\n    if (!username || !password) {\n        showFailModal(\"ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”.\");\n        return;\n    }\n    try {\n        showLoading();\n        const MIN_DELAY = 800;\n        const [res] = await Promise.all([\n            fetch(`${API_BASE}/api/login`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                credentials: \"include\",\n                body: JSON.stringify({ username, password }),\n            }),\n            new Promise((r) => setTimeout(r, MIN_DELAY)),\n        ]);\n        hideLoading();\n        if (!res.ok) {\n            showFailModal(\"ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\");\n            return;\n        }\n        const data = await res.json();\n        localStorage.setItem(\"user\", JSON.stringify({ id: data.id, name: data.name, loginTime: Date.now() }));\n        localStorage.setItem(\"loginUserId\", data.id);\n        localStorage.setItem(\"loginUserName\", data.name);\n        // âœ… ì„ íƒëœ ëª¨ë“œì— ë”°ë¼ íŽ˜ì´ì§€ ë¶„ê¸°\n        const nextUrl = mode === \"mobile\" ? \"mobileindex.html\" : \"workspace.html\";\n        console.log(\"[LOGIN SUCCESS]\", nextUrl);\n        window.location.href = nextUrl;\n    }\n    catch (err) {\n        console.error(err);\n        hideLoading();\n        showFailModal(\"ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\");\n    }\n});\n// âœ… ìºì‹œ ì´ˆê¸°í™”\nwindow.addEventListener(\"load\", () => {\n    localStorage.removeItem(\"user\");\n    sessionStorage.clear();\n});\n"],"names":["loginForm","document","getElementById","emailInput","passwordInput","loadingPopup","failModal","closeFailModalBtn","serverStatus","deviceStatus","deviceSelect","API_BASE","location","hostname","includes","hideLoading","classList","add","showFailModal","message","msgEl","textContent","remove","applyDeviceMode","mode","className","value","localStorage","setItem","addEventListener","e","target","getItem","async","fetch","method","ok","Error","checkServerConnection","preventDefault","username","trim","password","MIN_DELAY","res","Promise","all","headers","credentials","body","JSON","stringify","r","setTimeout","data","json","id","name","loginTime","Date","now","nextUrl","console","log","window","href","err","error","removeItem","sessionStorage","clear"],"ignoreList":[],"sourceRoot":""}