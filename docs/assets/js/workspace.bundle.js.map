{"version":3,"file":"workspace.bundle.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,QAAQ;AAC3D,iEAAiE,mBAAmB;AACpF,mDAAmD,SAAS;AAC5D,mDAAmD,OAAO;AAC1D,mDAAmD,OAAO;AAC1D,mDAAmD,YAAY;AAC/D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,SAAS,4BAA4B,kBAAkB;AAC5E,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;;;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA,aAAa;AACb;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,EAAE,GAAG,EAAE;AAC1F;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C,kCAAkC,OAAO;AACzC,kCAAkC,KAAK;AACvC;AACA,kCAAkC,cAAc;AAChD,kCAAkC,qBAAqB;AACvD,8CAA8C,SAAS;AACvD;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA,yBAAyB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,SAAS,aAAa,GAAG;AACpE;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,SAAS,aAAa,GAAG;AACpE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA,+BAA+B,oCAAoC;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,2CAA2C,SAAS,aAAa,GAAG;AACpE;AACA,+BAA+B,oCAAoC;AACnE;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;;;;;ACrVA;AAC8C;AAC9C;AACA;AACA;AACA,iDAAiD,GAAG;AACpD;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA,4DAA4D,WAAW;AACvE,sBAAsB,uDAAS;AAC/B;AACA;AACA,sDAAsD,WAAW;AACjE;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,4BAA4B;AAC5E,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,oCAAoC;AACnF;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;;;ACrKA;AAC8C;AAC9C;AACA;AACA;AACA,iDAAiD,GAAG;AACpD;AACA;AACA;AACA,0DAA0D,KAAK;AAC/D;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA,4DAA4D,YAAY,EAAE,KAAK;AAC/E,sBAAsB,uDAAS;AAC/B;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,4BAA4B;AACjF,kBAAkB,uDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;;ACtMA;AACA;AACA;AACA;AACA,+CAA+C,GAAG;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,EAAE,GAAG,EAAE,GAAG,IAAI;AAC5B;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,EAAE,GAAG,EAAE,GAAG,EAAE;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,uCAAuC,SAAS,uCAAuC,cAAc,KAAK,eAAe;AACzH;AACA;AACA,wCAAwC,YAAY,IAAI,KAAK;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,+CAA+C;AACvF;AACA;AACA,wCAAwC,2CAA2C;AACnF;AACA;AACA,wCAAwC,4CAA4C;AACpF;AACA;AACA;AACA;AACA,qDAAqD,QAAQ;AAC7D,qDAAqD,KAAK;AAC1D,qDAAqD,KAAK;AAC1D,qDAAqD,QAAQ,IAAI,OAAO;AACxE,qDAAqD,WAAW,IAAI,QAAQ;AAC5E,qDAAqD,QAAQ;AAC7D,qDAAqD,UAAU;AAC/D;AACA;AACA,aAAa;AACb,yCAAyC,YAAY;AACrD;AACA;AACA;AACA,8CAA8C,4BAA4B;AAC1E;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;;ACnKO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB,gFAAgF;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;;;;;;;UCrGA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;;;;;;;;;;;;ACNA;AACqE;AACd;AACqB;AACI;AACN;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,sEAAsE,GAAG;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI,kFAAuB;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,oEAAmB;AACzC;AACA;AACA;AACA;AACA,sBAAsB,yFAA6B;AACnD,sBAAsB,6FAA+B;AACrD;AACA;AACA;AACA;AACA,sBAAsB,uFAA4B;AAClD;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC","sources":["webpack://innomax/./TypeScript/workspace/01_dashboard-trip-status.ts","webpack://innomax/./TypeScript/workspace/04_user-manage.ts","webpack://innomax/./TypeScript/workspace/08_domestic-trip-register.ts","webpack://innomax/./TypeScript/workspace/09_domestic-trip-settlement.ts","webpack://innomax/./TypeScript/workspace/10_domestic-trip-history.ts","webpack://innomax/./TypeScript/workspace/utils/ModalUtil.ts","webpack://innomax/webpack/bootstrap","webpack://innomax/webpack/runtime/define property getters","webpack://innomax/webpack/runtime/hasOwnProperty shorthand","webpack://innomax/webpack/runtime/make namespace object","webpack://innomax/./TypeScript/workspace/00_workspace.ts"],"sourcesContent":["// TypeScript/workspace/01_dashboard-trip-status.ts\n/**\n * ğŸ“Œ ëŒ€ì‹œë³´ë“œ - ì¶œì¥ì í˜„í™© + ì˜¤ëŠ˜ ì¶œì¥ ì¸ì›\n *  - ë°±ì—”ë“œ /api/business-trip/status ì—ì„œ ì½ì–´ì˜´\n *  - 08 / 09 íŒŒì¼ì—ì„œ window.dispatchEvent(\"trip-status-refresh\") ë‚ ë¦¬ë©´ ì—¬ê¸°ì„œ ë‹¤ì‹œ ë¡œë”©\n */\nexport function initDashboardTripStatus(API_BASE) {\n    const kpiTripEl = document.getElementById(\"kpiTripToday\");\n    const tbody = document.getElementById(\"tripStatusTbody\");\n    const dateLabel = document.getElementById(\"tripStatusDateLabel\");\n    const searchInput = document.getElementById(\"tripSearchInput\");\n    const filterSelect = document.getElementById(\"tripFilterType\");\n    const reloadBtn = document.getElementById(\"btnTripReload\");\n    // ğŸ”¹ í•„ìˆ˜ DOM ì—†ìœ¼ë©´ ê·¸ëƒ¥ ì¢…ë£Œ\n    if (!kpiTripEl || !tbody) {\n        console.warn(\"[ëŒ€ì‹œë³´ë“œ] ì¶œì¥ì í˜„í™©ìš© ìš”ì†Œë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\");\n        return;\n    }\n    // ğŸ‘‰ ì—¬ê¸°ì„œë¶€í„°ëŠ” tbody ê°€ null ì´ ì•„ë‹ˆë¼ê³  í™•ì •ëœ ìƒíƒœ\n    const tbodyEl = tbody;\n    let lastItems = [];\n    let currentDate; // YYYY-MM-DD (ì—†ìœ¼ë©´ ì˜¤ëŠ˜)\n    // -----------------------------\n    // ğŸ”¹ í…Œì´ë¸” ë Œë” í•¨ìˆ˜\n    // -----------------------------\n    function renderTable() {\n        const keyword = (searchInput?.value ?? \"\").trim().toLowerCase();\n        const filter = filterSelect?.value ?? \"all\";\n        let items = lastItems.slice();\n        // (1) ì¢…ë¥˜ í•„í„°: ì§€ê¸ˆì€ ì „ë¶€ êµ­ë‚´ ì¶œì¥ì´ë¼ all/domestic ë§Œ ì‚¬ìš©\n        if (filter === \"overseas\" || filter === \"inhouse\") {\n            items = [];\n        }\n        // (2) ê²€ìƒ‰ì–´ í•„í„°: ì´ë¦„ / ê³ ê°ì‚¬ / ì¶œë°œì§€\n        if (keyword) {\n            items = items.filter((it) => {\n                const name = it.req_name?.toLowerCase() ?? \"\";\n                const dest = it.destination?.toLowerCase() ?? \"\";\n                const place = it.depart_place?.toLowerCase() ?? \"\";\n                return (name.includes(keyword) ||\n                    dest.includes(keyword) ||\n                    place.includes(keyword));\n            });\n        }\n        if (items.length === 0) {\n            tbodyEl.innerHTML = `\n        <tr>\n          <td colspan=\"6\" class=\"border px-2 py-3 text-center text-xs text-gray-400\">\n            ë“±ë¡ëœ ì¶œì¥ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\n          </td>\n        </tr>\n      `;\n            return;\n        }\n        tbodyEl.innerHTML = \"\";\n        items.forEach((it, idx) => {\n            const tr = document.createElement(\"tr\");\n            tr.className = \"border-t text-xs text-gray-700\";\n            const customer = it.destination || \"-\";\n            const depart = it.depart_time || \"-\";\n            const arrive = it.arrive_time || \"-\";\n            const statusLabel = it.status === \"SETTLED\"\n                ? `<span class=\"px-2 py-[2px] rounded-full bg-emerald-50 text-emerald-700 text-[10px] font-bold\">ì •ì‚°ì™„ë£Œ</span>`\n                : `<span class=\"px-2 py-[2px] rounded-full bg-indigo-50 text-indigo-700 text-[10px] font-bold\">ì¶œì¥ì¤‘</span>`;\n            tr.innerHTML = `\n        <td class=\"border px-2 py-2 text-center\">${idx + 1}</td>\n        <td class=\"border px-2 py-2 text-center font-semibold\">${it.req_name || \"-\"}</td>\n        <td class=\"border px-2 py-2 text-center\">${customer}</td>\n        <td class=\"border px-2 py-2 text-center\">${depart}</td>\n        <td class=\"border px-2 py-2 text-center\">${arrive}</td>\n        <td class=\"border px-2 py-2 text-center\">${statusLabel}</td>\n      `;\n            tbodyEl.appendChild(tr);\n        });\n    }\n    // -----------------------------\n    // ğŸ”¹ ì„œë²„ì—ì„œ ë°ì´í„° ë¡œë”©\n    // -----------------------------\n    async function loadTripStatus(date) {\n        currentDate = date;\n        if (dateLabel) {\n            dateLabel.textContent = date ?? \"ì˜¤ëŠ˜\";\n        }\n        tbodyEl.innerHTML = `\n      <tr>\n        <td colspan=\"6\" class=\"border px-2 py-3 text-center text-xs text-gray-400\">\n          ë°ì´í„° ë¡œë”© ì¤‘...\n        </td>\n      </tr>\n    `;\n        try {\n            const params = new URLSearchParams();\n            if (date)\n                params.set(\"date\", date);\n            const url = params.toString().length > 0\n                ? `${API_BASE}/api/business-trip/status?${params.toString()}`\n                : `${API_BASE}/api/business-trip/status`;\n            const res = await fetch(url);\n            if (!res.ok) {\n                console.error(\"[ëŒ€ì‹œë³´ë“œ] /status ì‘ë‹µ ì˜¤ë¥˜:\", res.status);\n                tbodyEl.innerHTML = `\n          <tr>\n            <td colspan=\"6\" class=\"border px-2 py-3 text-center text-xs text-red-500\">\n              ì„œë²„ ì˜¤ë¥˜: HTTP ${res.status}\n            </td>\n          </tr>\n        `;\n                return;\n            }\n            const json = await res.json().catch(() => null);\n            console.log(\"[ëŒ€ì‹œë³´ë“œ] status ì‘ë‹µ =\", json);\n            const rows = json?.data ?? [];\n            lastItems = rows;\n            // KPI: ì˜¤ëŠ˜ ì¶œì¥ ì¸ì› = í–‰ ê°œìˆ˜\n            kpiTripEl.textContent = String(rows.length);\n            renderTable();\n        }\n        catch (err) {\n            console.error(\"[ëŒ€ì‹œë³´ë“œ] ì¶œì¥ì í˜„í™© ë¡œë”© ì‹¤íŒ¨:\", err);\n            tbodyEl.innerHTML = `\n        <tr>\n          <td colspan=\"6\" class=\"border px-2 py-3 text-center text-xs text-red-500\">\n            ë°ì´í„° ë¡œë”© ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n          </td>\n        </tr>\n      `;\n        }\n    }\n    // -----------------------------\n    // ğŸ”¹ ì´ë²¤íŠ¸ ë°”ì¸ë”©\n    // -----------------------------\n    searchInput?.addEventListener(\"input\", () => {\n        renderTable();\n    });\n    filterSelect?.addEventListener(\"change\", () => {\n        renderTable();\n    });\n    reloadBtn?.addEventListener(\"click\", () => {\n        loadTripStatus(currentDate);\n    });\n    // âœ… ë‹¤ë¥¸ í™”ë©´(ë“±ë¡/ì •ì‚°)ì—ì„œ ì´ë²¤íŠ¸ ì˜ë©´ ì—¬ê¸°ì„œ ë‹¤ì‹œ ë¡œë”©\n    window.addEventListener(\"trip-status-refresh\", () => {\n        loadTripStatus(currentDate);\n    });\n    // âœ… ìµœì´ˆ í•œ ë²ˆ ë¡œë”© (ì˜¤ëŠ˜ ê¸°ì¤€)\n    loadTripStatus();\n}\n","// 04_user-manage.ts\nconst PERM_KEYS = [\"ì¶œì¥ìŠ¹ì¸\", \"ì¶œì¥ë‚´ì—­ê´€ë¦¬\", \"ì¶œì¥ë“±ë¡\", \"ì¶œì¥ë‚´ì—­\"];\n/** ì„œë²„ì—ì„œ ì˜¨ row(any í˜•íƒœ)ë¥¼ InnomaxUser ë¡œ ë³€í™˜ */\nfunction mapRawUser(row) {\n    return {\n        no: Number(row.no ?? row.No ?? 0),\n        id: String(row.id ?? row.ID ?? \"\"),\n        name: String(row.name ?? row.Name ?? \"\"),\n        email: row.email ?? null,\n        company_part: row.company_part ?? null,\n        // permissions: jsonb / text / null ì–´ë–¤ í˜•íƒœë¡œ ì™€ë„ ì²˜ë¦¬\n        permissions: (() => {\n            let perms = row.permissions ?? null;\n            if (!perms)\n                return null;\n            if (typeof perms === \"string\") {\n                try {\n                    perms = JSON.parse(perms);\n                }\n                catch {\n                    return null;\n                }\n            }\n            if (typeof perms === \"object\" && !Array.isArray(perms)) {\n                return perms;\n            }\n            return null;\n        })(),\n    };\n}\n/** í¼ì˜ permission select ê°’ë“¤ â†’ ê°ì²´ë¡œ ëª¨ìœ¼ê¸° */\nfunction collectPermissionsFromForm() {\n    const perms = {};\n    PERM_KEYS.forEach((key) => {\n        const el = document.getElementById(key);\n        if (el)\n            perms[key] = el.value;\n    });\n    return perms;\n}\n/** í¼ select ë“¤ì„ ì£¼ì–´ì§„ permission ê°’ìœ¼ë¡œ ì±„ìš°ê¸° */\nfunction fillPermissionSelects(perms) {\n    PERM_KEYS.forEach((key) => {\n        const el = document.getElementById(key);\n        if (!el)\n            return;\n        const v = perms?.[key];\n        if (v)\n            el.value = v;\n        else\n            el.value = \"ReadWrite\"; // ê¸°ë³¸ê°’\n    });\n}\n/** ğŸ‘ ë²„íŠ¼ìš© ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¸°ê¸° */\nfunction togglePassword() {\n    const input = document.getElementById(\"modalPassword\");\n    if (!input)\n        return;\n    input.type = input.type === \"password\" ? \"text\" : \"password\";\n}\n// HTMLì—ì„œ onclick=\"togglePassword()\" ì“¸ ìˆ˜ ìˆê²Œ ì „ì—­ì— ì˜¬ë¦¬ê¸°\nwindow.togglePassword = togglePassword;\nexport function initUserManagePanel(API_BASE) {\n    console.log(\"[ì‚¬ìš©ìê´€ë¦¬] initUserManagePanel ì‹œì‘\");\n    const tbodyEl = document.getElementById(\"userTableBody\");\n    const userModal = document.getElementById(\"userModal\");\n    const userForm = document.getElementById(\"userForm\");\n    const modalTitle = document.getElementById(\"modalTitle\");\n    const modalMode = document.getElementById(\"modalMode\"); // add / edit\n    const modalNo = document.getElementById(\"modalNo\");\n    const inputName = document.getElementById(\"modalName\");\n    const inputID = document.getElementById(\"modalID\");\n    const inputPassword = document.getElementById(\"modalPassword\");\n    const inputEmail = document.getElementById(\"modalEmail\");\n    const inputCompany = document.getElementById(\"modalCompanyPart\");\n    const btnAdd = document.getElementById(\"userAddBtn\");\n    const btnModalClose = document.getElementById(\"userModalCancelBtn\"); // ëª¨ë‹¬ ì•ˆ \"ì·¨ì†Œ\" ë²„íŠ¼\n    // í•„ìˆ˜ DOM ì—†ìœ¼ë©´ ì´ˆê¸°í™” ìŠ¤í‚µ\n    if (!tbodyEl || !userModal || !userForm) {\n        console.warn(\"[ì‚¬ìš©ìê´€ë¦¬] í•„ìˆ˜ DOM ìš”ì†Œë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. (tbodyEl, userModal, userForm ì¤‘ í•˜ë‚˜ ì—†ìŒ)\");\n        return;\n    }\n    const tbody = tbodyEl;\n    // ì´ë¯¸ ì´ˆê¸°í™”ëœ ê²½ìš° ë˜ í•˜ì§€ ì•Šê¸° (ì‚¬ì´ë“œë°” ì´ë™ ì‹œ ì¤‘ë³µ ë°©ì§€)\n    if (tbody._bound) {\n        console.debug(\"[ì‚¬ìš©ìê´€ë¦¬] ì´ë¯¸ ì´ˆê¸°í™”ëœ ìƒíƒœì´ë¯€ë¡œ ë‹¤ì‹œ ë°”ì¸ë”©í•˜ì§€ ì•ŠìŒ\");\n        return;\n    }\n    tbody._bound = true;\n    /** ëª¨ë‹¬ ì—´ê¸° */\n    function openModal(mode, user) {\n        if (!userModal || !modalMode || !modalTitle)\n            return;\n        modalMode.value = mode;\n        if (mode === \"add\") {\n            modalTitle.textContent = \"ì‚¬ìš©ì ì¶”ê°€\";\n            if (modalNo)\n                modalNo.value = \"\";\n            if (inputID)\n                inputID.value = \"\";\n            if (inputName)\n                inputName.value = \"\";\n            if (inputPassword)\n                inputPassword.value = \"\";\n            if (inputEmail)\n                inputEmail.value = \"\";\n            if (inputCompany)\n                inputCompany.value = \"ì´ë…¸ë§¥ìŠ¤\";\n            fillPermissionSelects(null);\n        }\n        else {\n            modalTitle.textContent = \"ì‚¬ìš©ì ìˆ˜ì •\";\n            if (user && modalNo)\n                modalNo.value = String(user.no);\n            if (inputID)\n                inputID.value = user?.id ?? \"\";\n            if (inputName)\n                inputName.value = user?.name ?? \"\";\n            if (inputPassword)\n                inputPassword.value = \"\"; // ìˆ˜ì • ì‹œì—ë§Œ ì…ë ¥\n            if (inputEmail)\n                inputEmail.value = user?.email ?? \"\";\n            if (inputCompany)\n                inputCompany.value = user?.company_part ?? \"ì´ë…¸ë§¥ìŠ¤\";\n            fillPermissionSelects(user?.permissions ?? {});\n        }\n        userModal.classList.remove(\"hidden\");\n    }\n    /** ëª¨ë‹¬ ë‹«ê¸° */\n    function closeModal() {\n        if (!userModal)\n            return;\n        userModal.classList.add(\"hidden\");\n    }\n    // ëª¨ë‹¬ \"ì·¨ì†Œ\" ë²„íŠ¼\n    btnModalClose?.addEventListener(\"click\", () => {\n        closeModal();\n    });\n    // ìƒë‹¨ \"ì‚¬ìš©ì ì¶”ê°€\" ë²„íŠ¼\n    console.log(\"[ì‚¬ìš©ìê´€ë¦¬] userAddBtn =\", btnAdd);\n    btnAdd?.addEventListener(\"click\", () => {\n        console.log(\"[ì‚¬ìš©ìê´€ë¦¬] ì¶”ê°€ ë²„íŠ¼ í´ë¦­\");\n        openModal(\"add\");\n    });\n    /** ì‚¬ìš©ì ëª©ë¡ ë‹¤ì‹œ ë¡œë”© */\n    async function loadUsers() {\n        tbody.innerHTML = `\n      <tr>\n        <td colspan=\"8\" class=\"px-3 py-2 text-center text-xs text-gray-400\">\n          ì‚¬ìš©ì ëª©ë¡ ë¡œë”© ì¤‘...\n        </td>\n      </tr>\n    `;\n        try {\n            const res = await fetch(`${API_BASE}/api/users`, {\n                credentials: \"include\",\n            });\n            if (!res.ok) {\n                throw new Error(`status = ${res.status}`);\n            }\n            const rows = await res.json();\n            console.log(\"[ì‚¬ìš©ìê´€ë¦¬] ì„œë²„ ì‘ë‹µ =\", rows);\n            const users = Array.isArray(rows)\n                ? rows.map(mapRawUser)\n                : [];\n            if (!users.length) {\n                tbody.innerHTML = `\n          <tr>\n            <td colspan=\"8\" class=\"px-3 py-2 text-center text-xs text-gray-400\">\n              ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.\n            </td>\n          </tr>\n        `;\n                return;\n            }\n            tbody.innerHTML = \"\";\n            users.forEach((u, idx) => {\n                const tr = document.createElement(\"tr\");\n                tr.className = \"divide-y divide-gray-200 text-xs\";\n                // ê¶Œí•œ í…ìŠ¤íŠ¸ ë§Œë“¤ê¸°\n                let permText = \"ê¶Œí•œì—†ìŒ\";\n                if (u.permissions) {\n                    const parts = Object.entries(u.permissions).map(([k, v]) => `${k}:${v}`);\n                    permText = parts.join(\", \");\n                }\n                tr.innerHTML = `\n          <td class=\"px-3 py-2\">${idx + 1}</td>\n          <td class=\"px-3 py-2\">${u.name}</td>\n          <td class=\"px-3 py-2\">${u.id}</td>\n          <td class=\"px-3 py-2\">****</td>\n          <td class=\"px-3 py-2\">${u.email ?? \"\"}</td>\n          <td class=\"px-3 py-2\">${u.company_part ?? \"\"}</td>\n          <td class=\"px-3 py-2 text-center\">${permText}</td>\n          <td class=\"px-3 py-2 text-center space-x-1\">\n            <button \n              class=\"px-2 py-1 rounded bg-indigo-500 text-white text-[11px] btn-edit-user\"\n              data-no=\"${u.no}\">\n              ìˆ˜ì •\n            </button>\n            <button \n              class=\"px-2 py-1 rounded bg-red-500 text-white text-[11px] btn-del-user\"\n              data-no=\"${u.no}\">\n              ì‚­ì œ\n            </button>\n          </td>\n        `;\n                tbody.appendChild(tr);\n            });\n        }\n        catch (err) {\n            console.error(\"[ì‚¬ìš©ìê´€ë¦¬] ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:\", err);\n            tbody.innerHTML = `\n        <tr>\n          <td colspan=\"8\" class=\"px-3 py-2 text-center text-xs text-red-500\">\n            ëª©ë¡ ë¡œë”© ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\n          </td>\n        </tr>\n      `;\n        }\n    }\n    /** í…Œì´ë¸”ì—ì„œ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬ (ì´ë²¤íŠ¸ ìœ„ì„) */\n    tbody.addEventListener(\"click\", async (e) => {\n        const target = e.target;\n        if (!target)\n            return;\n        // ìˆ˜ì • ë²„íŠ¼\n        if (target.classList.contains(\"btn-edit-user\")) {\n            const no = target.dataset.no;\n            if (!no)\n                return;\n            try {\n                const res = await fetch(`${API_BASE}/api/users/${no}`, {\n                    credentials: \"include\",\n                });\n                if (!res.ok) {\n                    alert(\"ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\n                    return;\n                }\n                const raw = await res.json();\n                const user = mapRawUser(raw);\n                openModal(\"edit\", user);\n            }\n            catch (err) {\n                console.error(\"[ì‚¬ìš©ìê´€ë¦¬] ë‹¨ì¼ ì¡°íšŒ ì‹¤íŒ¨:\", err);\n            }\n        }\n        // ì‚­ì œ ë²„íŠ¼\n        if (target.classList.contains(\"btn-del-user\")) {\n            const no = target.dataset.no;\n            if (!no)\n                return;\n            if (!confirm(\"ì •ë§ ì´ ì‚¬ìš©ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\"))\n                return;\n            try {\n                const res = await fetch(`${API_BASE}/api/users/${no}`, {\n                    method: \"DELETE\",\n                    credentials: \"include\",\n                });\n                if (!res.ok) {\n                    alert(\"ì‚­ì œ ì‹¤íŒ¨\");\n                    return;\n                }\n                await loadUsers();\n            }\n            catch (err) {\n                console.error(\"[ì‚¬ìš©ìê´€ë¦¬] ì‚­ì œ ì‹¤íŒ¨:\", err);\n                alert(\"ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n            }\n        }\n    });\n    /** ëª¨ë‹¬ ì•ˆì˜ form submit â†’ ì¶”ê°€ ë˜ëŠ” ìˆ˜ì • */\n    userForm.addEventListener(\"submit\", async (e) => {\n        e.preventDefault();\n        const mode = modalMode?.value === \"edit\" ? \"edit\" : \"add\";\n        const no = modalNo?.value;\n        const id = inputID?.value.trim() ?? \"\";\n        const name = inputName?.value.trim() ?? \"\";\n        const password = inputPassword?.value.trim() ?? \"\";\n        const email = inputEmail?.value.trim() || null;\n        const company_part = inputCompany?.value.trim() || null;\n        const permissions = collectPermissionsFromForm();\n        if (!id || !name || (mode === \"add\" && !password)) {\n            alert(\"ID, ì´ë¦„, ë¹„ë°€ë²ˆí˜¸(ì¶”ê°€ ì‹œ)ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.\");\n            return;\n        }\n        try {\n            if (mode === \"add\") {\n                const res = await fetch(`${API_BASE}/api/users`, {\n                    method: \"POST\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify({\n                        // âš ï¸ ë°±ì—”ë“œê°€ ì•„ì§ Name/IDë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆì–´ì„œ ê·¸ëŒ€ë¡œ ìœ ì§€\n                        Name: name,\n                        ID: id,\n                        password,\n                        email,\n                        company_part,\n                        permissions,\n                    }),\n                });\n                const json = await res.json();\n                if (!res.ok || json.ok === false) {\n                    alert(json.error || \"ì‚¬ìš©ì ì¶”ê°€ ì‹¤íŒ¨\");\n                    return;\n                }\n            }\n            else {\n                if (!no) {\n                    alert(\"ìˆ˜ì • ëŒ€ìƒ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\n                    return;\n                }\n                const payload = {\n                    Name: name,\n                    ID: id,\n                    email,\n                    company_part,\n                    permissions,\n                };\n                if (password)\n                    payload.password = password; // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥í–ˆì„ ë•Œë§Œ ë³€ê²½\n                const res = await fetch(`${API_BASE}/api/users/${no}`, {\n                    method: \"PUT\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify(payload),\n                });\n                const json = await res.json();\n                if (!res.ok || json.ok === false) {\n                    alert(json.error || \"ì‚¬ìš©ì ìˆ˜ì • ì‹¤íŒ¨\");\n                    return;\n                }\n            }\n            closeModal();\n            await loadUsers();\n        }\n        catch (err) {\n            console.error(\"[ì‚¬ìš©ìê´€ë¦¬] ì €ì¥ ì‹¤íŒ¨:\", err);\n            alert(\"ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n        }\n    });\n    // ì²˜ìŒ í•œ ë²ˆ ëª©ë¡ ë¡œë”©\n    loadUsers();\n}\n","// TypeScript/workspace/08_domestic-trip-register.ts\nimport { ModalUtil } from \"./utils/ModalUtil\";\nfunction getEl(id) {\n    const el = document.getElementById(id);\n    if (!el)\n        throw new Error(`âŒ element not found: #${id}`);\n    return el;\n}\nexport function initDomesticTripRegisterPanel(API_BASE) {\n    const panel = document.getElementById(\"panel-êµ­ë‚´ì¶œì¥-ì¶œì¥ë“±ë¡\");\n    if (!panel)\n        return;\n    const saveBtn = getEl(\"reg_save\");\n    // ì´ë¯¸ ë°”ì¸ë”© ë˜ì—ˆìœ¼ë©´ ì¬ë°”ì¸ë”© ë°©ì§€\n    if (saveBtn._bound)\n        return;\n    saveBtn._bound = true;\n    const resetBtn = getEl(\"reg_reset\");\n    const resultBox = getEl(\"reg_result\");\n    // ğŸ”¹ ì´ì–´ì‘ì„± ë²„íŠ¼\n    const continueBtn = document.getElementById(\"reg_continue\");\n    // ğŸ”¹ ê°™ì€ íŒ¨ë„ ì•ˆì˜ ì •ì‚° ì‘ì„± ì„¹ì…˜ (ìˆ¨ê²¼ë‹¤ê°€ í¼ì¹  ì˜ì—­)\n    const settlementSection = document.getElementById(\"bt_settlement_section\");\n    const userNameEl = document.getElementById(\"userName\");\n    const reqNameInput = getEl(\"bt_req_name\");\n    const departPlaceInput = getEl(\"bt_place\");\n    const destinationInput = getEl(\"bt_destination\");\n    const startInput = getEl(\"bt_start\");\n    const departTimeInput = getEl(\"bt_depart_time\");\n    const arriveTimeInput = getEl(\"bt_arrive_time\");\n    const purposeInput = getEl(\"bt_purpose\");\n    // ìš”ì²­ì ìë™ ì±„ìš°ê¸°\n    reqNameInput.value = (userNameEl?.textContent ?? \"\").trim() || \"ì‚¬ìš©ì\";\n    // ì´ˆê¸°: ì´ì–´ì‘ì„± ë²„íŠ¼/ì •ì‚°ì„¹ì…˜ ìˆ¨ê¹€\n    if (continueBtn)\n        continueBtn.classList.add(\"hidden\");\n    if (settlementSection)\n        settlementSection.classList.add(\"hidden\");\n    // ğŸ”¹ í¼ ë¦¬ì…‹\n    resetBtn.addEventListener(\"click\", () => {\n        departPlaceInput.value = \"\";\n        destinationInput.value = \"\";\n        startInput.value = \"\";\n        departTimeInput.value = \"\";\n        arriveTimeInput.value = \"\";\n        purposeInput.value = \"\";\n        resultBox.textContent = \"\";\n        // ë¦¬ì…‹ ì‹œ ì´ì–´ì‘ì„± ë²„íŠ¼/ì •ì‚°ì˜ì—­ ìˆ¨ê¸°ê¸°\n        if (continueBtn)\n            continueBtn.classList.add(\"hidden\");\n        if (settlementSection)\n            settlementSection.classList.add(\"hidden\");\n    });\n    // ğŸ”¹ ì¶œì¥ ë“±ë¡\n    saveBtn.addEventListener(\"click\", async () => {\n        const payload = {\n            trip_type: \"domestic\",\n            req_name: reqNameInput.value.trim(),\n            depart_place: departPlaceInput.value.trim(),\n            destination: destinationInput.value.trim(),\n            start_date: startInput.value,\n            depart_time: departTimeInput.value,\n            arrive_time: arriveTimeInput.value,\n            purpose: purposeInput.value.trim(),\n        };\n        console.log(\"[REGISTER] payload =\", payload);\n        // í•„ìˆ˜ê°’ ì²´í¬ (ì´ì œ work_start_time ì—†ìŒ)\n        if (!payload.req_name ||\n            !payload.depart_place ||\n            !payload.destination ||\n            !payload.start_date ||\n            !payload.depart_time ||\n            !payload.arrive_time ||\n            !payload.purpose) {\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì…ë ¥ í™•ì¸\",\n                message: \"ëª¨ë“  í•­ëª©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.\",\n                showOk: true,\n                showCancel: false,\n            });\n            return;\n        }\n        try {\n            saveBtn.disabled = true;\n            resultBox.textContent = \"ì„œë²„ì— ì €ì¥ ì¤‘...\";\n            const res = await fetch(`${API_BASE}/api/business-trip/domestic`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify(payload),\n            });\n            if (!res.ok) {\n                const text = await res.text();\n                console.error(\"ì¶œì¥ë“±ë¡ ì‹¤íŒ¨ ì‘ë‹µ:\", res.status, text);\n                resultBox.textContent = `âŒ ì„œë²„ ì €ì¥ ì‹¤íŒ¨: HTTP ${res.status}`;\n                await ModalUtil.show({\n                    type: \"alert\",\n                    title: \"ì €ì¥ ì‹¤íŒ¨\",\n                    message: `ì„œë²„ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\n(HTTP ${res.status})`,\n                    showOk: true,\n                    showCancel: false,\n                });\n                if (continueBtn)\n                    continueBtn.classList.add(\"hidden\");\n                if (settlementSection)\n                    settlementSection.classList.add(\"hidden\");\n                return;\n            }\n            const data = await res.json().catch(() => null);\n            console.log(\"ì¶œì¥ë“±ë¡ ì„±ê³µ ì‘ë‹µ:\", data);\n            // ì •ì‚° í™”ë©´ì—ì„œ ì°¸ê³ í•  ì´ˆì•ˆ ì €ì¥\n            localStorage.setItem(\"domesticTripDraft\", JSON.stringify(payload));\n            resultBox.textContent = \"âœ… ì¶œì¥ ë“±ë¡ ì™„ë£Œ (ì„œë²„ ì €ì¥ ì™„ë£Œ)\";\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì €ì¥ ì™„ë£Œ\",\n                message: \"ì¶œì¥ ë“±ë¡ ë‚´ìš©ì´ ì„œë²„ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\\n[ì´ì–´ ì •ì‚° ì‘ì„±] ë²„íŠ¼ì„ ëˆŒëŸ¬ ì •ì‚°ì„ ì‘ì„±í•˜ì„¸ìš”.\",\n                showOk: true,\n                showCancel: false,\n            });\n            if (continueBtn)\n                continueBtn.classList.remove(\"hidden\");\n            if (settlementSection) {\n                settlementSection.classList.add(\"hidden\");\n            }\n            localStorage.setItem(\"settleTargetDate\", payload.start_date);\n            localStorage.setItem(\"settleTargetReqName\", payload.req_name);\n            window.dispatchEvent(new Event(\"trip-status-refresh\"));\n        }\n        catch (err) {\n            console.error(\"ì¶œì¥ë“±ë¡ ì¤‘ ì˜¤ë¥˜:\", err);\n            resultBox.textContent = `âŒ ì €ì¥ ì‹¤íŒ¨: ${err?.message ?? \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜\"}`;\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì €ì¥ ì‹¤íŒ¨\",\n                message: resultBox.textContent,\n                showOk: true,\n                showCancel: false,\n            });\n            window.dispatchEvent(new Event(\"trip-status-refresh\"));\n            if (continueBtn)\n                continueBtn.classList.add(\"hidden\");\n            if (settlementSection)\n                settlementSection.classList.add(\"hidden\");\n        }\n        finally {\n            saveBtn.disabled = false;\n        }\n    });\n    // ğŸ”¹ ì´ì–´ì‘ì„± ë²„íŠ¼ í´ë¦­ â†’ ì •ì‚° ì„¹ì…˜ í¼ì¹˜ê¸°\n    continueBtn?.addEventListener(\"click\", () => {\n        const date = startInput.value;\n        const name = reqNameInput.value.trim();\n        if (date)\n            localStorage.setItem(\"settleTargetDate\", date);\n        if (name)\n            localStorage.setItem(\"settleTargetReqName\", name);\n        if (settlementSection) {\n            settlementSection.classList.remove(\"hidden\");\n            settlementSection.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n        }\n        resultBox.textContent = \"âœï¸ ì´ ì¶œì¥ê±´ì— ëŒ€í•œ ì •ì‚° ì •ë³´ë¥¼ ì•„ë˜ì—ì„œ ì´ì–´ì„œ ì‘ì„±í•˜ì„¸ìš”.\";\n    });\n}\n","// TypeScript/workspace/09_domestic-trip-settlement.ts\nimport { ModalUtil } from \"./utils/ModalUtil\";\nfunction getEl(id) {\n    const el = document.getElementById(id);\n    if (!el)\n        throw new Error(`âŒ element not found: #${id}`);\n    return el;\n}\nfunction getCheckedRadioValue(name) {\n    const checked = document.querySelector(`input[name=\"${name}\"]:checked`);\n    return checked?.value ?? \"\";\n}\n/**\n * êµ­ë‚´ì¶œì¥ ì •ì‚° ì…ë ¥ íŒ¨ë„ ì´ˆê¸°í™”\n * - 00_workspace.ts ì—ì„œ initDomesticTripSettlementPanel(API_BASE)ë¡œ í•œ ë²ˆë§Œ í˜¸ì¶œ\n */\nexport function initDomesticTripSettlementPanel(API_BASE) {\n    console.log(\"[ì •ì‚°] initDomesticTripSettlementPanel í˜¸ì¶œ\");\n    const section = document.getElementById(\"bt_settlement_section\");\n    if (!section) {\n        console.warn(\"[ì •ì‚°] #bt_settlement_section ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. HTML êµ¬ì¡°ë¥¼ í™•ì¸í•˜ì„¸ìš”.\");\n        return;\n    }\n    const saveBtn = getEl(\"bt_save\");\n    // ì¤‘ë³µ ë°”ì¸ë”© ë°©ì§€\n    if (saveBtn._bound) {\n        console.log(\"[ì •ì‚°] ì´ë¯¸ ë°”ì¸ë”©ëœ ìƒíƒœì´ë¯€ë¡œ ë‹¤ì‹œ ë°”ì¸ë”©í•˜ì§€ ì•ŠìŒ\");\n        return;\n    }\n    saveBtn._bound = true;\n    const resetBtn = getEl(\"bt_reset\");\n    const resultBox = getEl(\"bt_result\");\n    const workEndInput = getEl(\"bt_work_end_time\");\n    const returnTimeInput = getEl(\"bt_return_time\");\n    const returnPlaceInput = getEl(\"bt_return_place\");\n    const mealBreakfastCheck = getEl(\"bt_meal_breakfast\");\n    const mealLunchCheck = getEl(\"bt_meal_lunch\");\n    const mealDinnerCheck = getEl(\"bt_meal_dinner\");\n    const mealBreakfastOwner = getEl(\"bt_meal_breakfast_owner\");\n    const mealLunchOwner = getEl(\"bt_meal_lunch_owner\");\n    const mealDinnerOwner = getEl(\"bt_meal_dinner_owner\");\n    // ğŸ”¹ 08_domestic-trip-register.ts ì—ì„œ ì €ì¥í•´ ë‘” ê°’ ì‚¬ìš©\n    const baseDate = localStorage.getItem(\"settleTargetDate\") ?? \"\";\n    const baseReqName = localStorage.getItem(\"settleTargetReqName\") ?? \"\";\n    console.log(\"[ì •ì‚°] baseDate =\", baseDate, \"baseReqName =\", baseReqName);\n    // ğŸ”¹ ë¦¬ì…‹ ë²„íŠ¼\n    resetBtn.addEventListener(\"click\", () => {\n        workEndInput.value = \"\";\n        returnTimeInput.value = \"\";\n        returnPlaceInput.value = \"\";\n        mealBreakfastCheck.checked = false;\n        mealLunchCheck.checked = false;\n        mealDinnerCheck.checked = false;\n        mealBreakfastOwner.value = \"\";\n        mealLunchOwner.value = \"\";\n        mealDinnerOwner.value = \"\";\n        resultBox.textContent = \"ì •ì‚° ì…ë ¥ê°’ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.\";\n    });\n    // ğŸ”¹ ì •ì‚° ì €ì¥ ë²„íŠ¼\n    saveBtn.addEventListener(\"click\", async () => {\n        console.log(\"[ì •ì‚°] ì €ì¥ ë²„íŠ¼ í´ë¦­\");\n        const vehicleValue = getCheckedRadioValue(\"bt_vehicle\");\n        // ğŸš¨ ì¶œë°œì¼/ì´ë¦„ì´ ë¹„ì–´ ìˆìœ¼ë©´ ì–´ë–¤ ê±´ì§€ ëª¨ë¦„\n        const trip_date = localStorage.getItem(\"settleTargetDate\") ?? \"\";\n        const req_name = localStorage.getItem(\"settleTargetReqName\") ?? \"\";\n        if (!trip_date || !req_name) {\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì •ì‚° ëŒ€ìƒ ì—†ìŒ\",\n                message: \"ì–´ë–¤ ì¶œì¥ê±´ì— ëŒ€í•œ ì •ì‚°ì¸ì§€ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\\në¨¼ì € [ì¶œì¥ë“±ë¡]ì—ì„œ ì €ì¥ í›„ [ì´ì–´ ì •ì‚° ì‘ì„±]ìœ¼ë¡œ ë“¤ì–´ì™€ ì£¼ì„¸ìš”.\",\n                showOk: true,\n                showCancel: false,\n            });\n            return;\n        }\n        // í•„ìˆ˜ê°’ ì²´í¬\n        if (!workEndInput.value) {\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì…ë ¥ í™•ì¸\",\n                message: \"ì—…ë¬´ ì¢…ë£Œì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\",\n                showOk: true,\n                showCancel: false,\n            });\n            return;\n        }\n        if (!returnTimeInput.value) {\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì…ë ¥ í™•ì¸\",\n                message: \"ë³µê·€ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\",\n                showOk: true,\n                showCancel: false,\n            });\n            return;\n        }\n        if (!returnPlaceInput.value.trim()) {\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì…ë ¥ í™•ì¸\",\n                message: \"ë³µê·€ì§€(íšŒì‚¬/ìíƒ)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\",\n                showOk: true,\n                showCancel: false,\n            });\n            return;\n        }\n        if (!vehicleValue) {\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì…ë ¥ í™•ì¸\",\n                message: \"ì°¨ëŸ‰(ì •ì‚°ìš©)ì„ ì„ íƒí•´ì£¼ì„¸ìš”.\",\n                showOk: true,\n                showCancel: false,\n            });\n            return;\n        }\n        const settlement = {\n            work_end_time: workEndInput.value,\n            return_time: returnTimeInput.value,\n            return_place: returnPlaceInput.value.trim(),\n            vehicle: vehicleValue,\n            meals: {\n                breakfast: {\n                    checked: mealBreakfastCheck.checked,\n                    owner: mealBreakfastOwner.value,\n                },\n                lunch: {\n                    checked: mealLunchCheck.checked,\n                    owner: mealLunchOwner.value,\n                },\n                dinner: {\n                    checked: mealDinnerCheck.checked,\n                    owner: mealDinnerOwner.value,\n                },\n            },\n        };\n        // ğŸ§  ë°±ì—”ë“œ /settlement ëŠ” req_name, trip_date, detail_json ì „ì²´ë¥¼ ë°›ëŠ”ë‹¤.\n        // detail_json ì•ˆì— settlement ë¥¼ ë„£ì–´ì„œ ë³´ë‚´ì•¼ í•¨.\n        const detail_json = {\n            settlement,\n        };\n        try {\n            saveBtn.disabled = true;\n            resultBox.textContent = \"ì •ì‚° ë‚´ìš© ì €ì¥ ì¤‘...\";\n            const res = await fetch(`${API_BASE}/api/business-trip/settlement`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                },\n                body: JSON.stringify({\n                    req_name,\n                    trip_date,\n                    detail_json, // âœ… ë°±ì—”ë“œê°€ ê¸°ëŒ€í•˜ëŠ” êµ¬ì¡°\n                }),\n            });\n            console.log(\"[ì •ì‚°] ì‘ë‹µ status =\", res.status);\n            if (!res.ok) {\n                const text = await res.text();\n                resultBox.textContent = `âŒ ì •ì‚° ì €ì¥ ì‹¤íŒ¨: HTTP ${res.status} ${text}`;\n                await ModalUtil.show({\n                    type: \"alert\",\n                    title: \"ì •ì‚° ì €ì¥ ì‹¤íŒ¨\",\n                    message: resultBox.textContent,\n                    showOk: true,\n                    showCancel: false,\n                });\n                return;\n            }\n            const data = await res.json().catch(() => null);\n            console.log(\"[ì •ì‚°] ì‘ë‹µ data =\", data);\n            resultBox.textContent = \"âœ… ì •ì‚° ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\";\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì •ì‚° ì™„ë£Œ\",\n                message: \"ì •ì‚° ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n                showOk: true,\n                showCancel: false,\n            });\n            // í•„ìš”í•˜ë©´ ì´ˆê¸°í™”\n            // resetBtn.click();\n            // ëŒ€ì‹œë³´ë“œ/ì¶œì¥ í˜„í™© ìƒˆë¡œê³ ì¹¨ìš©\n            window.dispatchEvent(new Event(\"trip-status-refresh\"));\n        }\n        catch (err) {\n            console.error(\"[ì •ì‚°] ì €ì¥ ì¤‘ ì˜¤ë¥˜:\", err);\n            resultBox.textContent = `âŒ ì •ì‚° ì €ì¥ ì¤‘ ì˜¤ë¥˜: ${err?.message ?? \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜\"}`;\n            await ModalUtil.show({\n                type: \"alert\",\n                title: \"ì •ì‚° ì €ì¥ ì˜¤ë¥˜\",\n                message: resultBox.textContent,\n                showOk: true,\n                showCancel: false,\n            });\n        }\n        finally {\n            saveBtn.disabled = false;\n        }\n    });\n}\n","// TypeScript/workspace/10_domestic-trip-history.ts\nfunction getEl(id) {\n    const el = document.getElementById(id);\n    if (!el)\n        throw new Error(`element not found: #${id}`);\n    return el;\n}\nfunction formatYmd(isoDate) {\n    const d = typeof isoDate === \"string\" ? new Date(isoDate) : isoDate;\n    if (Number.isNaN(d.getTime()))\n        return \"-\";\n    const y = d.getFullYear();\n    const m = String(d.getMonth() + 1).padStart(2, \"0\");\n    const day = String(d.getDate()).padStart(2, \"0\");\n    return `${y}-${m}-${day}`;\n}\n// ğŸŒŸ ì •ì‚° ë‚´ì—­ ë³´ê¸° íŒ¨ë„ ì´ˆê¸°í™”\nexport function initDomesticTripHistoryPanel(API_BASE) {\n    const panel = document.getElementById(\"panel-êµ­ë‚´ì¶œì¥-ì •ì‚°ì„œë“±ë¡\");\n    if (!panel)\n        return;\n    const searchBtn = getEl(\"settle_search\");\n    // ì¤‘ë³µ ë°”ì¸ë”© ë°©ì§€\n    if (searchBtn._bound)\n        return;\n    searchBtn._bound = true;\n    const fromInput = getEl(\"settle_from\");\n    const toInput = getEl(\"settle_to\");\n    const resultMsg = getEl(\"settle_result_msg\");\n    const tbody = getEl(\"settle_result_tbody\");\n    // ê¸°ë³¸ ë‚ ì§œ: ì˜¤ëŠ˜\n    if (!fromInput.value || !toInput.value) {\n        const today = new Date();\n        const y = today.getFullYear();\n        const m = String(today.getMonth() + 1).padStart(2, \"0\");\n        const d = String(today.getDate()).padStart(2, \"0\");\n        const todayStr = `${y}-${m}-${d}`;\n        fromInput.value = todayStr;\n        toInput.value = todayStr;\n    }\n    // âœ… localStorage.user ì—ì„œ ë¡œê·¸ì¸í•œ ì‚¬ëŒì˜ name ê°€ì ¸ì˜¤ê¸°\n    function getLoginUserName() {\n        try {\n            const stored = localStorage.getItem(\"user\");\n            if (!stored)\n                return null;\n            const user = JSON.parse(stored);\n            return user?.name ?? null;\n        }\n        catch {\n            return null;\n        }\n    }\n    async function fetchHistory() {\n        const from = fromInput.value;\n        const to = toInput.value;\n        if (!from || !to) {\n            resultMsg.textContent = \"ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì„ ëª¨ë‘ ì„ íƒí•˜ì„¸ìš”.\";\n            return;\n        }\n        if (from > to) {\n            resultMsg.textContent = \"ì‹œì‘ì¼ì´ ì¢…ë£Œì¼ë³´ë‹¤ ëŠ¦ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\";\n            return;\n        }\n        // âœ… í•­ìƒ ë¡œê·¸ì¸í•œ ì‚¬ëŒ ì´ë¦„ìœ¼ë¡œë§Œ ì¡°íšŒ\n        const reqNameParam = getLoginUserName();\n        if (!reqNameParam) {\n            resultMsg.textContent = \"ë¡œê·¸ì¸ ì •ë³´ì—ì„œ ì‚¬ìš©ì ì´ë¦„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\";\n            tbody.innerHTML = `\n        <tr>\n          <td colspan=\"7\" class=\"border px-2 py-3 text-center text-rose-500\">\n            ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ì–´ ì •ì‚° ë‚´ì—­ì„ ì¡°íšŒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n          </td>\n        </tr>\n      `;\n            return;\n        }\n        resultMsg.textContent = \"ì •ì‚° ë‚´ì—­ì„ ì¡°íšŒ ì¤‘ì…ë‹ˆë‹¤...\";\n        tbody.innerHTML = `\n      <tr>\n        <td colspan=\"7\" class=\"border px-2 py-3 text-center text-gray-400\">\n          ì¡°íšŒ ì¤‘...\n        </td>\n      </tr>\n    `;\n        const qs = new URLSearchParams();\n        qs.set(\"from\", from);\n        qs.set(\"to\", to);\n        qs.set(\"req_name\", reqNameParam); // ğŸ‘ˆ í•­ìƒ ë¡œê·¸ì¸ ì‚¬ìš©ì ì´ë¦„\n        try {\n            const res = await fetch(`${API_BASE}/api/business-trip/settlements-range?${qs.toString()}`, { method: \"GET\" });\n            if (!res.ok) {\n                const text = await res.text();\n                throw new Error(`HTTP ${res.status} / ${text}`);\n            }\n            const json = await res.json();\n            const rows = json?.data ?? [];\n            if (!rows.length) {\n                tbody.innerHTML = `\n          <tr>\n            <td colspan=\"7\" class=\"border px-2 py-3 text-center text-gray-400\">\n              ì¡°íšŒëœ ì •ì‚° ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.\n            </td>\n          </tr>\n        `;\n                resultMsg.textContent = \"ì¡°íšŒëœ ì •ì‚° ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.\";\n                return;\n            }\n            // ë Œë”ë§\n            tbody.innerHTML = \"\";\n            rows.forEach((row) => {\n                const r = row.detail_json?.register ?? {};\n                const s = row.detail_json?.settlement ?? {};\n                const dateStr = formatYmd(row.trip_date);\n                const name = row.req_name || \"-\";\n                const dest = r.destination || \"-\";\n                const depart = r.depart_time || \"-\";\n                const arrive = r.arrive_time || \"-\";\n                const workStart = r.work_start_time || \"-\";\n                const workEnd = s.work_end_time || \"-\";\n                const vehicle = s.vehicle || \"-\";\n                const meals = s.meals || {};\n                const mealStrs = [];\n                if (meals.breakfast?.checked) {\n                    mealStrs.push(`ì¡°ì‹(${meals.breakfast.owner === \"corp\" ? \"ë²•ì¸\" : \"ê°œì¸\"})`);\n                }\n                if (meals.lunch?.checked) {\n                    mealStrs.push(`ì¤‘ì‹(${meals.lunch.owner === \"corp\" ? \"ë²•ì¸\" : \"ê°œì¸\"})`);\n                }\n                if (meals.dinner?.checked) {\n                    mealStrs.push(`ì„ì‹(${meals.dinner.owner === \"corp\" ? \"ë²•ì¸\" : \"ê°œì¸\"})`);\n                }\n                const mealsText = mealStrs.length ? mealStrs.join(\", \") : \"-\";\n                const tr = document.createElement(\"tr\");\n                tr.innerHTML = `\n          <td class=\"border px-2 py-1 text-center\">${dateStr}</td>\n          <td class=\"border px-2 py-1 text-center\">${name}</td>\n          <td class=\"border px-2 py-1 text-center\">${dest}</td>\n          <td class=\"border px-2 py-1 text-center\">${depart} ~ ${arrive}</td>\n          <td class=\"border px-2 py-1 text-center\">${workStart} ~ ${workEnd}</td>\n          <td class=\"border px-2 py-1 text-center\">${vehicle}</td>\n          <td class=\"border px-2 py-1 text-center\">${mealsText}</td>\n        `;\n                tbody.appendChild(tr);\n            });\n            resultMsg.textContent = `ì´ ${rows.length}ê±´ì˜ ì •ì‚° ë‚´ì—­ì´ ì¡°íšŒë˜ì—ˆìŠµë‹ˆë‹¤.`;\n        }\n        catch (err) {\n            console.error(err);\n            resultMsg.textContent = `ì¡°íšŒ ì‹¤íŒ¨: ${err?.message ?? \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜\"}`;\n            tbody.innerHTML = `\n        <tr>\n          <td colspan=\"7\" class=\"border px-2 py-3 text-center text-rose-500\">\n            ì¡°íšŒ ì‹¤íŒ¨: ${err?.message ?? \"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜\"}\n          </td>\n        </tr>\n      `;\n        }\n    }\n    // ë²„íŠ¼ ì´ë²¤íŠ¸ ì—°ê²°\n    searchBtn.addEventListener(\"click\", () => {\n        fetchHistory();\n    });\n}\n","export const ModalUtil = {\n    el: null,\n    ensureElement() {\n        if (this.el)\n            return this.el;\n        const div = document.createElement(\"div\");\n        div.id = \"globalSimpleModal\";\n        div.className =\n            \"hidden fixed inset-0 z-[9999] flex items-center justify-center bg-black/50\";\n        div.innerHTML = `\n      <div id=\"modalBox\" class=\"bg-white w-[360px] rounded-2xl p-6 shadow-xl text-center\">\n        <div id=\"modalIcon\" class=\"text-5xl mb-4 select-none\"></div>\n        <h2 id=\"modalTitle\" class=\"text-xl font-bold mb-2\"></h2>\n        <p id=\"modalMessage\" class=\"text-sm text-gray-700 mb-6\"></p>\n        <div id=\"modalBtns\" class=\"flex justify-center gap-2\">\n          <button id=\"modalCancelBtn\"\n            class=\"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 hidden\">ì·¨ì†Œ</button>\n          <button id=\"modalOkBtn\"\n            class=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 hidden\">í™•ì¸</button>\n        </div>\n      </div>\n    `;\n        document.body.appendChild(div);\n        this.el = div;\n        return div;\n    },\n    setStyle(type) {\n        const el = this.ensureElement();\n        const iconEl = el.querySelector(\"#modalIcon\");\n        const titleEl = el.querySelector(\"#modalTitle\");\n        if (type === \"alert\") {\n            iconEl.textContent = \"â„¹ï¸\";\n            iconEl.className = \"text-5xl text-blue-600 mb-4\";\n            titleEl.className = \"text-xl font-bold mb-2 text-blue-700\";\n        }\n        else {\n            iconEl.textContent = \"âš ï¸\";\n            iconEl.className = \"text-5xl text-yellow-500 mb-4\";\n            titleEl.className = \"text-xl font-bold mb-2 text-yellow-700\";\n        }\n    },\n    /**\n     * âœ¨ ë‹¨ì¼ ëª¨ë‹¬ í˜¸ì¶œ\n     * - alert â†’ ì•„ë¬´ ê°’ ì—†ìŒ\n     * - warn â†’ boolean ë°˜í™˜\n     */\n    async show({ type = \"alert\", title = \"ì•Œë¦¼\", message = \"\", showOk = true, showCancel = false, }) {\n        const el = this.ensureElement();\n        const titleEl = el.querySelector(\"#modalTitle\");\n        const msgEl = el.querySelector(\"#modalMessage\");\n        const okBtn = el.querySelector(\"#modalOkBtn\");\n        const cancelBtn = el.querySelector(\"#modalCancelBtn\");\n        // ìŠ¤íƒ€ì¼\n        this.setStyle(type);\n        // ë‚´ìš©\n        titleEl.textContent = title;\n        msgEl.textContent = message;\n        // ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€\n        okBtn.classList.toggle(\"hidden\", !showOk);\n        cancelBtn.classList.toggle(\"hidden\", !showCancel);\n        // í‘œì‹œ\n        el.classList.remove(\"hidden\");\n        // -----------------------\n        // alert ëª¨ë‹¬ì€ í™•ì¸ë§Œ í•„ìš”\n        // -----------------------\n        if (type === \"alert\") {\n            return new Promise((resolve) => {\n                const close = () => {\n                    this.hide();\n                    okBtn.removeEventListener(\"click\", close);\n                    resolve();\n                };\n                okBtn.addEventListener(\"click\", close);\n            });\n        }\n        // -----------------------\n        // warn ëª¨ë‹¬ì€ í™•ì¸/ì·¨ì†Œ í•„ìš”\n        // -----------------------\n        return new Promise((resolve) => {\n            const onOk = () => {\n                cleanup();\n                this.hide();\n                resolve(true);\n            };\n            const onCancel = () => {\n                cleanup();\n                this.hide();\n                resolve(false);\n            };\n            const cleanup = () => {\n                okBtn.removeEventListener(\"click\", onOk);\n                cancelBtn.removeEventListener(\"click\", onCancel);\n            };\n            okBtn.addEventListener(\"click\", onOk);\n            cancelBtn.addEventListener(\"click\", onCancel);\n        });\n    },\n    hide() {\n        const el = this.ensureElement();\n        el.classList.add(\"hidden\");\n    },\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// TypeScript/workspace/00_workspace.ts\nimport { initDashboardTripStatus } from \"./01_dashboard-trip-status\";\nimport { initUserManagePanel } from \"./04_user-manage\";\nimport { initDomesticTripRegisterPanel } from \"./08_domestic-trip-register\";\nimport { initDomesticTripSettlementPanel } from \"./09_domestic-trip-settlement\";\nimport { initDomesticTripHistoryPanel } from \"./10_domestic-trip-history\";\nconst API_BASE = location.hostname === \"gwoun01.github.io\"\n    ? \"https://outwork.sel3.cloudtype.app\"\n    : \"http://127.0.0.1:5050\";\n// âœ… ë¡œê·¸ì¸í•  ë•Œ login.tsì—ì„œ ë„£ì–´ë‘” ê°’ ì‚¬ìš©\n//   localStorage.setItem(\"loginUserId\", data.id);\nfunction getLoginUserId() {\n    const id = localStorage.getItem(\"loginUserId\");\n    return id || \"ì‚¬ìš©ì\"; // ì—†ìœ¼ë©´ ê¸°ë³¸ í…ìŠ¤íŠ¸\n}\n/** localStorage ì—ì„œ ë¡œê·¸ì¸ ìœ ì € ì „ì²´ ì •ë³´ ê°€ì ¸ì˜¤ê¸° */\nfunction getLoginUser() {\n    const raw = localStorage.getItem(\"user\");\n    if (!raw)\n        return null;\n    try {\n        return JSON.parse(raw);\n    }\n    catch {\n        return null;\n    }\n}\n/** í˜„ì¬ ë¡œê·¸ì¸ ìœ ì €ì˜ ê¶Œí•œ ë§µë§Œ ë½‘ê¸° */\nfunction getUserPermissions() {\n    const user = getLoginUser();\n    return user?.permissions ?? {};\n}\n/** íŒ¨ë„ ID â†’ permissions í‚¤ ë§¤í•‘ */\nconst PANEL_PERM_MAP = {\n    \"panel-ì¶œì¥ìŠ¹ì¸\": \"ì¶œì¥ìŠ¹ì¸\",\n    \"panel-ì¶œì¥ë‚´ì—­-ê´€ë¦¬\": \"ì¶œì¥ë‚´ì—­ê´€ë¦¬\",\n    \"panel-êµ­ë‚´ì¶œì¥-ì¶œì¥ë“±ë¡\": \"ì¶œì¥ë“±ë¡\",\n    \"panel-êµ­ë‚´ì¶œì¥-ì •ì‚°ì„œë“±ë¡\": \"ì¶œì¥ë‚´ì—­\",\n    // ğŸ‘‰ ëŒ€ì‹œë³´ë“œ, ì‚¬ìš©ì ê´€ë¦¬ ë“±ì€ ì—¬ê¸° ì•ˆ ë„£ìœ¼ë©´ ê¶Œí•œ ì²´í¬ ì•ˆ í•¨ (ëª¨ë‘ ì ‘ê·¼ ê°€ëŠ¥)\n};\n/** ì´ íŒ¨ë„ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ”ì§€? (localStorage.permissions ê¸°ì¤€) */\nfunction canAccessPanel(panelId) {\n    const permKey = PANEL_PERM_MAP[panelId];\n    // ë§¤í•‘ ì•ˆ ë˜ì–´ ìˆìœ¼ë©´(ëŒ€ì‹œë³´ë“œ, ì‚¬ìš©ìê´€ë¦¬ ë“±) ê¶Œí•œ ì²´í¬ ì—†ì´ í†µê³¼\n    if (!permKey)\n        return true;\n    const perms = getUserPermissions();\n    const value = perms[permKey]; // \"ReadWrite\" | \"ReadOnly\" | \"NoAccess\" | undefined\n    // ê°’ì´ ì—†ê±°ë‚˜ NoAccess ë©´ ë§‰ê¸°\n    if (!value || value === \"NoAccess\") {\n        return false;\n    }\n    // ReadOnly / ReadWrite â†’ í™”ë©´ ë“¤ì–´ê°€ëŠ” ê±´ í—ˆìš©\n    return true;\n}\n/**\n * íŒ¨ë„ ì „í™˜(ì‚¬ì´ë“œ ë©”ë‰´ â†’ ë©”ì¸ íŒ¨ë„, ì œëª© ë°”ê¾¸ê¸°)\n */\nfunction initLocalTabNavigation() {\n    const navButtons = document.querySelectorAll(\".nav-btn\");\n    const panels = document.querySelectorAll('[id^=\"panel-\"]');\n    const titleEl = document.getElementById(\"wsTitle\");\n    function showPanel(id) {\n        // ëª¨ë“  íŒ¨ë„ ìˆ¨ê¸°ê³ \n        panels.forEach((p) => p.classList.add(\"hidden\"));\n        // ëŒ€ìƒ íŒ¨ë„ë§Œ ë³´ì´ê¸°\n        const target = document.getElementById(id);\n        if (target)\n            target.classList.remove(\"hidden\");\n        // ì‚¬ì´ë“œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ í† ê¸€\n        navButtons.forEach((btn) => {\n            const active = btn.dataset.panel === id;\n            btn.classList.toggle(\"bg-[#7ce92f]\", active);\n            btn.classList.toggle(\"text-[#000000]\", active);\n            btn.classList.toggle(\"font-bold\", active);\n        });\n        // ìƒë‹¨ ì œëª© ë³€ê²½\n        const curBtn = document.querySelector(`.nav-btn[data-panel=\"${id}\"]`);\n        if (curBtn && titleEl) {\n            titleEl.textContent = curBtn.textContent?.trim() ?? \"\";\n        }\n    }\n    // ê¸°ë³¸ì€ ëŒ€ì‹œë³´ë“œ\n    showPanel(\"panel-dashboard\");\n    return showPanel;\n}\n// ==============================================================\n// ğŸ”µ ë©”ì¸ ì´ˆê¸°í™”\n// ==============================================================\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n    console.debug(\"[INIT] workspace DOMContentLoaded\");\n    // 1) ë¡œê·¸ì¸í•œ ì•„ì´ë”” í—¤ë”ì— í‘œì‹œ + ì•„ë°”íƒ€ í…ìŠ¤íŠ¸\n    const userId = getLoginUserId(); // ì˜ˆ) \"ê¶Œíƒì„ \"\n    const userNameEl = document.getElementById(\"userName\");\n    const avatarEl = document.getElementById(\"avatar\");\n    const logoutBtn = document.getElementById(\"logoutBtn\");\n    if (userNameEl) {\n        userNameEl.textContent = userId; // ğŸ”¹ í—¤ë”ì— \"ì‚¬ìš©ì\" ëŒ€ì‹  ì•„ì´ë””\n    }\n    if (avatarEl) {\n        avatarEl.textContent = userId.slice(0, 2); // ì• 2ê¸€ì ì •ë„ë§Œ ë™ê·¸ë¼ë¯¸ ì•ˆì—\n    }\n    // 2) ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼\n    logoutBtn?.addEventListener(\"click\", async () => {\n        try {\n            // ì„¸ì…˜ ì¿ í‚¤ ì •ë¦¬ìš© (ë°±ì—”ë“œì— /api/logout ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ê·¸ëƒ¥ ë„˜ì–´ê°)\n            await fetch(`${API_BASE}/api/logout`, {\n                method: \"POST\",\n                credentials: \"include\",\n            }).catch(() => { });\n        }\n        finally {\n            // ë¡œì»¬ ì €ì¥ëœ ë¡œê·¸ì¸ ì •ë³´ ì‚­ì œ\n            localStorage.removeItem(\"loginUserId\");\n            localStorage.removeItem(\"loginUserName\");\n            localStorage.removeItem(\"user\");\n            sessionStorage.clear();\n            // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ (íŒŒì¼ ì´ë¦„ì— ë§ê²Œ ìˆ˜ì •)\n            window.location.href = \"index.html\";\n        }\n    });\n    // 3) íŒ¨ë„ ë„¤ë¹„ê²Œì´ì…˜ ì„¸íŒ…\n    const showPanel = initLocalTabNavigation();\n    // 4) ëŒ€ì‹œë³´ë“œ(ì¶œì¥ì í˜„í™© + KPI) ì´ˆê¸°í™” â†’ ì„œë²„ì™€ ì—°ê²°\n    initDashboardTripStatus(API_BASE);\n    // 5) ì‚¬ì´ë“œë°”ì—ì„œ íŒ¨ë„ ì´ë™\n    const sidebarButtons = document.querySelectorAll(\"#sidebar [data-panel]\");\n    sidebarButtons.forEach((btn) => {\n        btn.addEventListener(\"click\", async () => {\n            const id = btn.dataset.panel;\n            if (!id)\n                return;\n            // âœ…  ë¨¼ì € ê¶Œí•œ ì²´í¬\n            if (!canAccessPanel(id)) {\n                alert(\"ì´ ë©”ë‰´ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.\");\n                return;\n            }\n            // âœ… ê¶Œí•œ OK â†’ íŒ¨ë„ ì „í™˜\n            showPanel(id);\n            // ëŒ€ì‹œë³´ë“œ íƒ­ í´ë¦­ â†’ í•­ìƒ ìµœì‹  ë°ì´í„°ë¡œ ìƒˆë¡œê³ ì¹¨\n            if (id === \"panel-dashboard\") {\n                window.dispatchEvent(new Event(\"trip-status-refresh\"));\n            }\n            // ì‚¬ìš©ì ê´€ë¦¬ íƒ­\n            if (id === \"panel-ì‚¬ìš©ì-ê´€ë¦¬\") {\n                await initUserManagePanel(API_BASE);\n                console.log(\"[INIT] ì‚¬ìš©ì-ê´€ë¦¬ init ì™„ë£Œ\");\n            }\n            // êµ­ë‚´ì¶œì¥ - ì¶œì¥ë“±ë¡ íŒ¨ë„ â†’ ë“±ë¡ + ì •ì‚° íŒ¨ë„ ì´ˆê¸°í™”\n            if (id === \"panel-êµ­ë‚´ì¶œì¥-ì¶œì¥ë“±ë¡\") {\n                await initDomesticTripRegisterPanel(API_BASE);\n                await initDomesticTripSettlementPanel(API_BASE);\n                console.log(\"[INIT] êµ­ë‚´ì¶œì¥-ì¶œì¥ë“±ë¡ & ì •ì‚° íŒ¨ë„ init ì™„ë£Œ\");\n            }\n            // êµ­ë‚´ì¶œì¥ - ì¶œì¥ë‚´ì—­(ì •ì‚° ë‚´ì—­ ì¡°íšŒ)\n            if (id === \"panel-êµ­ë‚´ì¶œì¥-ì •ì‚°ì„œë“±ë¡\") {\n                await initDomesticTripHistoryPanel(API_BASE);\n                console.log(\"[INIT] êµ­ë‚´ì¶œì¥-ì •ì‚° ë‚´ì—­ ì¡°íšŒ íŒ¨ë„ init ì™„ë£Œ\");\n            }\n        });\n    });\n    // 6) ì²˜ìŒ ì§„ì…: ëŒ€ì‹œë³´ë“œ íŒ¨ë„ + ì˜¤ëŠ˜ ë°ì´í„° ë¡œë”©\n    showPanel(\"panel-dashboard\");\n    window.dispatchEvent(new Event(\"trip-status-refresh\"));\n    console.debug(\"[INIT] workspace ì´ˆê¸°í™” ì™„ë£Œ\");\n});\n"],"names":[],"ignoreList":[],"sourceRoot":""}